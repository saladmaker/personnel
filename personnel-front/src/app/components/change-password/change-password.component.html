<div class="h-screen flex justify-center items-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-4">
  <p-card
    header="Change Your Password"
    class="w-full max-w-sm shadow-xl border border-gray-200 bg-white rounded-2xl overflow-hidden"
  >
    <ng-template pTemplate="header">
      <div class="text-center pt-8 pb-4 bg-gradient-to-b from-white to-gray-50">
        <h2 class="text-3xl font-bold text-gray-800">Update Password</h2>
        <p class="text-sm text-gray-600 mt-2">Enter your new password below</p>
      </div>
    </ng-template>

    <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="p-fluid px-6 py-4">
      <!-- Current Password -->
      <div class="field mb-5">
        <label for="currentPassword" class="font-medium mb-2 block text-gray-700">Current Password</label>
        <p-password
          id="currentPassword"
          formControlName="currentPassword"
          [toggleMask]="true"
          [feedback]="false"
          placeholder="Enter current password"
          [ngClass]="{ 'ng-invalid ng-dirty': f['currentPassword'].invalid && f['currentPassword'].touched }"
          styleClass="w-full"
          inputStyleClass="w-full focus:ring-2 focus:ring-blue-300 focus:border-blue-400 border-gray-300 bg-gray-50 text-gray-900 rounded-lg"
        ></p-password>
        <small
          class="p-error pt-1 block"
          *ngIf="f['currentPassword'].invalid && f['currentPassword'].touched"
          id="currentPassword-help"
        >
          <span *ngIf="f['currentPassword'].errors?.['required']">Current password is required.</span>
        </small>
      </div>

      <!-- New Password -->
      <div class="field mb-5">
        <label for="newPassword" class="font-medium mb-2 block text-gray-700">New Password</label>
        <p-password
          id="newPassword"
          formControlName="newPassword"
          [toggleMask]="true"
          [feedback]="false"
          placeholder="Enter new password"
          [ngClass]="{ 'ng-invalid ng-dirty': f['newPassword'].invalid && f['newPassword'].touched }"
          styleClass="w-full"
          inputStyleClass="w-full focus:ring-2 focus:ring-blue-300 focus:border-blue-400 border-gray-300 bg-gray-50 text-gray-900 rounded-lg"
        ></p-password>
        <small
          class="p-error pt-1 block"
          *ngIf="f['newPassword'].invalid && f['newPassword'].touched"
          id="newPassword-help"
        >
          <span *ngIf="f['newPassword'].errors?.['required']">New password is required.</span>
          <span *ngIf="f['newPassword'].errors?.['minlength']">New password must be at least 8 characters.</span>
        </small>
      </div>

      <!-- Confirm Password -->
      <div class="field mb-6">
        <label for="confirmNewPassword" class="font-medium mb-2 block text-gray-700">Confirm New Password</label>
        <p-password
          id="confirmNewPassword"
          formControlName="confirmNewPassword"
          [toggleMask]="true"
          [feedback]="false"
          placeholder="Confirm new password"
          [ngClass]="{ 'ng-invalid ng-dirty': (f['confirmNewPassword'].invalid && f['confirmNewPassword'].touched) || changePasswordForm.hasError('mustMatch') }"
          styleClass="w-full"
          inputStyleClass="w-full focus:ring-2 focus:ring-blue-300 focus:border-blue-400 border-gray-300 bg-gray-50 text-gray-900 rounded-lg"
        ></p-password>

        <small
          class="p-error pt-1 block"
          *ngIf="f['confirmNewPassword'].errors?.['required'] && f['confirmNewPassword'].touched"
          id="confirmNewPassword-help"
        >
          Confirm password is required.
        </small>

        <small
          class="p-error pt-1 block"
          *ngIf="changePasswordForm.hasError('mustMatch') && f['confirmNewPassword'].touched"
          id="confirmNewPassword-mustmatch"
        >
          Passwords do not match.
        </small>
      </div>

      <!-- Submit Button -->
      <p-button
        label="Change Password"
        icon="pi pi-check"
        type="submit"
        [loading]="loading"
        [disabled]="changePasswordForm.invalid"
        class="w-full"
        styleClass="p-button-primary bg-blue-500 hover:bg-blue-600 border-blue-500 rounded-lg"
      ></p-button>

      <!-- Back link -->
      <div class="flex justify-center items-center mt-5">
        <a
          routerLink="/profile"
          class="text-sm text-blue-600 hover:text-blue-700 hover:underline transition-colors duration-200"
        >
          Back to Profile
        </a>
      </div>

      <!-- Messages -->
      <div *ngIf="successMessage" class="text-green-600 text-center mt-4">
        {{ successMessage }}
      </div>
      <div *ngIf="errorMessage" class="text-red-600 text-center mt-4">
        {{ errorMessage }}
      </div>
    </form>
  </p-card>
</div>
